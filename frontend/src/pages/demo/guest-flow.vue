<template>
  <view class="demo-page">
    <view class="demo-header">
      <text class="demo-title">è®¿å®¢åˆ†äº«åŠŸèƒ½æ¼”ç¤º</text>
      <text class="demo-subtitle">ä½“éªŒå®Œæ•´çš„è®¿å®¢é‚€è¯·æµç¨‹</text>
    </view>

    <!-- åŠŸèƒ½æµç¨‹å›¾ -->
    <view class="flow-diagram card">
      <view class="flow-title">åŠŸèƒ½æµç¨‹</view>
      
      <view class="flow-steps">
        <view class="step-item" :class="{ active: currentStep >= 1 }">
          <view class="step-number">1</view>
          <view class="step-content">
            <text class="step-title">å®¶åº­æˆå‘˜åˆ›å»ºé‚€è¯·</text>
            <text class="step-desc">åœ¨å®¶åº­ç®¡ç†é¡µé¢ç‚¹å‡»"é‚€è¯·æœ‹å‹"</text>
          </view>
        </view>
        
        <view class="step-arrow">â†“</view>
        
        <view class="step-item" :class="{ active: currentStep >= 2 }">
          <view class="step-number">2</view>
          <view class="step-content">
            <text class="step-title">è®¾ç½®é‚€è¯·å‚æ•°</text>
            <text class="step-desc">é€‰æ‹©æœ‰æ•ˆæœŸã€æ·»åŠ å¤‡æ³¨ä¿¡æ¯</text>
          </view>
        </view>
        
        <view class="step-arrow">â†“</view>
        
        <view class="step-item" :class="{ active: currentStep >= 3 }">
          <view class="step-number">3</view>
          <view class="step-content">
            <text class="step-title">åˆ†äº«é‚€è¯·ç </text>
            <text class="step-desc">é€šè¿‡å¾®ä¿¡ã€å¤åˆ¶é“¾æ¥ç­‰æ–¹å¼åˆ†äº«</text>
          </view>
        </view>
        
        <view class="step-arrow">â†“</view>
        
        <view class="step-item" :class="{ active: currentStep >= 4 }">
          <view class="step-number">4</view>
          <view class="step-content">
            <text class="step-title">æœ‹å‹è¿›å…¥è®¿å®¢æ¨¡å¼</text>
            <text class="step-desc">é€šè¿‡é‚€è¯·ç æ³¨å†Œè®¿å®¢èº«ä»½</text>
          </view>
        </view>
        
        <view class="step-arrow">â†“</view>
        
        <view class="step-item" :class="{ active: currentStep >= 5 }">
          <view class="step-number">5</view>
          <view class="step-content">
            <text class="step-title">æµè§ˆèœè°±ä¸‹è®¢å•</text>
            <text class="step-desc">è®¿å®¢å¯ä»¥æŸ¥çœ‹èœè°±å¹¶ä¸‹è®¢å•</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠŸèƒ½ç‰¹è‰² -->
    <view class="features-section card">
      <view class="features-title">åŠŸèƒ½ç‰¹è‰²</view>
      
      <view class="features-grid">
        <view class="feature-card">
          <text class="feature-icon">â°</text>
          <text class="feature-title">æ—¶æ•ˆæ§åˆ¶</text>
          <text class="feature-desc">å¯è®¾ç½®1å°æ—¶åˆ°7å¤©çš„æœ‰æ•ˆæœŸ</text>
        </view>
        
        <view class="feature-card">
          <text class="feature-icon">ğŸ”’</text>
          <text class="feature-title">æƒé™éš”ç¦»</text>
          <text class="feature-desc">è®¿å®¢åªèƒ½æŸ¥çœ‹å’Œç‚¹é¤ï¼Œæ— æ³•ä¿®æ”¹</text>
        </view>
        
        <view class="feature-card">
          <text class="feature-icon">ğŸ“Š</text>
          <text class="feature-title">ä½¿ç”¨ç»Ÿè®¡</text>
          <text class="feature-desc">å®æ—¶æŸ¥çœ‹é‚€è¯·ä½¿ç”¨æƒ…å†µ</text>
        </view>
        
        <view class="feature-card">
          <text class="feature-icon">ğŸ¯</text>
          <text class="feature-title">ç²¾å‡†åˆ†äº«</text>
          <text class="feature-desc">ä¸€ç ä¸€ç”¨ï¼Œå®‰å…¨å¯æ§</text>
        </view>
      </view>
    </view>

    <!-- ä½¿ç”¨åœºæ™¯ -->
    <view class="scenarios-section card">
      <view class="scenarios-title">ä½¿ç”¨åœºæ™¯</view>
      
      <view class="scenario-list">
        <view class="scenario-item">
          <text class="scenario-icon">ğŸ </text>
          <view class="scenario-content">
            <text class="scenario-title">æœ‹å‹æ¥è®¿</text>
            <text class="scenario-desc">æœ‹å‹æ¥å®¶é‡Œåšå®¢æ—¶ï¼Œå¯ä»¥æå‰æŸ¥çœ‹èœè°±å¹¶ç‚¹é¤</text>
          </view>
        </view>
        
        <view class="scenario-item">
          <text class="scenario-icon">ğŸ‰</text>
          <view class="scenario-content">
            <text class="scenario-title">èšä¼šæ´»åŠ¨</text>
            <text class="scenario-desc">ç»„ç»‡èšä¼šæ—¶ï¼Œè®©å‚ä¸è€…æå‰é€‰æ‹©å–œæ¬¢çš„èœå“</text>
          </view>
        </view>
        
        <view class="scenario-item">
          <text class="scenario-icon">ğŸ’¼</text>
          <view class="scenario-content">
            <text class="scenario-title">å•†åŠ¡æ‹›å¾…</text>
            <text class="scenario-desc">å•†åŠ¡å®¢æˆ·å¯ä»¥æå‰äº†è§£èœå“å¹¶é¢„è®¢</text>
          </view>
        </view>
        
        <view class="scenario-item">
          <text class="scenario-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</text>
          <view class="scenario-content">
            <text class="scenario-title">äº²å‹èšé¤</text>
            <text class="scenario-desc">äº²æˆšæœ‹å‹èšé¤æ—¶ï¼Œå¤§å®¶ä¸€èµ·é€‰æ‹©èœå“</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="demo-actions">
      <button class="demo-btn primary" @click="startDemo">
        <text class="btn-icon">ğŸš€</text>
        <text class="btn-text">å¼€å§‹ä½“éªŒ</text>
      </button>
      
      <button class="demo-btn secondary" @click="viewGuestPage">
        <text class="btn-icon">ğŸ‘€</text>
        <text class="btn-text">æŸ¥çœ‹è®¿å®¢é¡µé¢</text>
      </button>
    </view>

    <!-- æŠ€æœ¯è¯´æ˜ -->
    <view class="tech-info card">
      <view class="tech-title">æŠ€æœ¯å®ç°</view>
      
      <view class="tech-list">
        <view class="tech-item">
          <text class="tech-label">é‚€è¯·ç ç”Ÿæˆ</text>
          <text class="tech-value">éšæœºå­—ç¬¦ä¸² + æ—¶é—´æˆ³</text>
        </view>
        
        <view class="tech-item">
          <text class="tech-label">æƒé™æ§åˆ¶</text>
          <text class="tech-value">åŸºäºJWTçš„è®¿å®¢token</text>
        </view>
        
        <view class="tech-item">
          <text class="tech-label">æœ‰æ•ˆæœŸç®¡ç†</text>
          <text class="tech-value">æœåŠ¡ç«¯æ—¶é—´éªŒè¯</text>
        </view>
        
        <view class="tech-item">
          <text class="tech-label">åˆ†äº«æ–¹å¼</text>
          <text class="tech-value">å¾®ä¿¡åˆ†äº« + é“¾æ¥å¤åˆ¶</text>
        </view>
      </view>
    </view>
  </view>
</template>

<script setup lang="ts">
import { ref } from 'vue'

// å“åº”å¼æ•°æ®
const currentStep = ref(1)

// å¼€å§‹æ¼”ç¤º
const startDemo = () => {
  // æ¨¡æ‹Ÿæ­¥éª¤è¿›åº¦
  let step = 1
  const timer = setInterval(() => {
    currentStep.value = step
    step++
    if (step > 5) {
      clearInterval(timer)
      uni.showToast({
        title: 'æ¼”ç¤ºå®Œæˆ',
        icon: 'success'
      })
    }
  }, 1000)
  
  // è·³è½¬åˆ°å®¶åº­ç®¡ç†é¡µé¢
  setTimeout(() => {
    uni.navigateTo({
      url: '/pages/family/index'
    })
  }, 2000)
}

// æŸ¥çœ‹è®¿å®¢é¡µé¢
const viewGuestPage = () => {
  // ä½¿ç”¨æ¼”ç¤ºé‚€è¯·ç 
  const demoInviteCode = 'DEMO123'
  uni.navigateTo({
    url: `/pages/guest/index?invite=${demoInviteCode}`
  })
}
</script>

<style lang="scss" scoped>
.demo-page {
  padding: 24rpx;
  background-color: #FAFAFA;
  min-height: 100vh;
}

.card {
  background-color: #fff;
  border-radius: 16rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);
  margin-bottom: 24rpx;
  padding: 32rpx;
}

// é¡µé¢å¤´éƒ¨
.demo-header {
  text-align: center;
  padding: 32rpx 0 48rpx;
  
  .demo-title {
    display: block;
    font-size: 40rpx;
    font-weight: bold;
    color: #333;
    margin-bottom: 8rpx;
  }
  
  .demo-subtitle {
    display: block;
    font-size: 28rpx;
    color: #FF8A65;
  }
}

// æµç¨‹å›¾
.flow-diagram {
  .flow-title {
    font-size: 32rpx;
    font-weight: bold;
    color: #333;
    margin-bottom: 32rpx;
    text-align: center;
  }
  
  .flow-steps {
    .step-item {
      display: flex;
      align-items: center;
      margin-bottom: 24rpx;
      opacity: 0.5;
      transition: all 0.3s ease;
      
      &.active {
        opacity: 1;
        transform: scale(1.02);
      }
      
      .step-number {
        width: 48rpx;
        height: 48rpx;
        border-radius: 24rpx;
        background-color: #E0E0E0;
        color: #999;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24rpx;
        font-weight: bold;
        margin-right: 24rpx;
        transition: all 0.3s ease;
      }
      
      &.active .step-number {
        background-color: #FF8A65;
        color: white;
      }
      
      .step-content {
        flex: 1;
        
        .step-title {
          display: block;
          font-size: 28rpx;
          font-weight: bold;
          color: #333;
          margin-bottom: 4rpx;
        }
        
        .step-desc {
          display: block;
          font-size: 24rpx;
          color: #666;
        }
      }
    }
    
    .step-arrow {
      text-align: center;
      font-size: 24rpx;
      color: #CCC;
      margin: 16rpx 0;
    }
  }
}

// åŠŸèƒ½ç‰¹è‰²
.features-section {
  .features-title {
    font-size: 32rpx;
    font-weight: bold;
    color: #333;
    margin-bottom: 32rpx;
    text-align: center;
  }
  
  .features-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16rpx;
    
    .feature-card {
      background-color: #F8F8F8;
      padding: 24rpx;
      border-radius: 12rpx;
      text-align: center;
      
      .feature-icon {
        font-size: 48rpx;
        display: block;
        margin-bottom: 16rpx;
      }
      
      .feature-title {
        display: block;
        font-size: 26rpx;
        font-weight: bold;
        color: #333;
        margin-bottom: 8rpx;
      }
      
      .feature-desc {
        display: block;
        font-size: 22rpx;
        color: #666;
        line-height: 1.4;
      }
    }
  }
}

// ä½¿ç”¨åœºæ™¯
.scenarios-section {
  .scenarios-title {
    font-size: 32rpx;
    font-weight: bold;
    color: #333;
    margin-bottom: 32rpx;
    text-align: center;
  }
  
  .scenario-list {
    .scenario-item {
      display: flex;
      align-items: center;
      margin-bottom: 24rpx;
      
      .scenario-icon {
        font-size: 40rpx;
        width: 80rpx;
        text-align: center;
        margin-right: 24rpx;
      }
      
      .scenario-content {
        flex: 1;
        
        .scenario-title {
          display: block;
          font-size: 28rpx;
          font-weight: bold;
          color: #333;
          margin-bottom: 4rpx;
        }
        
        .scenario-desc {
          display: block;
          font-size: 24rpx;
          color: #666;
          line-height: 1.5;
        }
      }
    }
  }
}

// æ“ä½œæŒ‰é’®
.demo-actions {
  display: flex;
  gap: 16rpx;
  margin: 32rpx 0;
  
  .demo-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12rpx;
    padding: 20rpx;
    border-radius: 12rpx;
    font-size: 28rpx;
    font-weight: bold;
    border: none;
    
    &.primary {
      background: linear-gradient(135deg, #FF8A65 0%, #FF7043 100%);
      color: white;
    }
    
    &.secondary {
      background-color: #F5F5F5;
      color: #333;
    }
    
    .btn-icon {
      font-size: 24rpx;
    }
  }
}

// æŠ€æœ¯è¯´æ˜
.tech-info {
  .tech-title {
    font-size: 32rpx;
    font-weight: bold;
    color: #333;
    margin-bottom: 32rpx;
    text-align: center;
  }
  
  .tech-list {
    .tech-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16rpx 0;
      border-bottom: 1rpx solid #F0F0F0;
      
      &:last-child {
        border-bottom: none;
      }
      
      .tech-label {
        font-size: 26rpx;
        color: #333;
        font-weight: bold;
      }
      
      .tech-value {
        font-size: 24rpx;
        color: #666;
      }
    }
  }
}
</style>
